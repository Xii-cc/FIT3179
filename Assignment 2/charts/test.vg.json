{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 600,
    "projection": {
      "type": "mercator"
    },
    "layer": [
      {
        "data": {
          "url": "../Dataset/ne_10m_admin_1_states_provinces.json",
          "format": {
            "type": "topojson",
            "feature": "ne_10m_admin_1_states_provinces"
          }
        },
        "mark": {
          "type": "geoshape",
          "fill": "#ddd",
          "stroke": "#fff",
          "strokeWidth": 1
        }
      },
      {
        "data": {
          "url": "../Dataset/malaysia_routes.csv",
          "format": {
            "type": "csv"
          }
        },
        "mark": {
          "type": "rule",
          "color": "#000",
          "opacity": 0.35
        },
        "transform": [
          {
            "filter": {"param": "hover", "empty": false}
          }
        ],
        "encoding": {
          "latitude": {"field": "Source_Latitude", "type": "quantitative"},
          "longitude": {"field": "Source_Longitude", "type": "quantitative"},
          "latitude2": {"field": "Destination_Latitude", "type": "quantitative"},
          "longitude2": {"field": "Destination_Longitude", "type": "quantitative"}
        }
      },
      {
        "data": {
          "url": "../Dataset/my_airports_cleaned.csv",
          "format": {
            "type": "csv"
          }
        },
        "mark": {"type": "circle"},
        "encoding": {
          "longitude": {
            "field": "longitude_deg",
            "type": "quantitative"
          },
          "latitude": {
            "field": "latitude_deg",
            "type": "quantitative"
          },
          "size": {
            "field": "connectivity",
            "type": "quantitative",
            "scale": {"range": [0, 1000]}
          },
          "tooltip": [
            {"field": "name", "type": "nominal"},
            {"field": "region_name", "type": "nominal"},
            {"field": "connectivity", "type": "quantitative"}
          ],
          "order": {
            "field": "connectivity",
            "type": "quantitative",
            "sort": "descending"
          }
        },
        "params": [
          {
            "name": "hover",
            "select": {"type": "point", "on": "pointerover", "nearest": true, "fields": ["iata_code"]}
          }
        ]
      }
    ]
  }
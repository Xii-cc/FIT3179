{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 500,
    "height": 425,
    "title": "Malaysian Airport Types",
    "data": {
        "url": "./Dataset/my_airports_cleaned.csv"
    },
    "config": {
        "background": null,
        "text": {
            "color": "#d1d4ce",
            "size": 12
        },
        "axis": {
            "labelColor": "#d1d4ce",
            "titleColor": "#d1d4ce",
            "domain": false
        },
        "title": {
            "color": "#d1d4ce"
        },
        "legend": {
            "titleColor": "#d1d4ce",
            "labelColor": "#d1d4ce",
            "orient": "bottom",
            "symbolStrokeColor": null,
            "titleAlign": "center",
            "titleAnchor": "middle",
            "labelFontSize": 12,
            "titleFontSize": 12
        },
        "view": {
                "strokeWidth": 0,
                "step": 13
            }
    },
    "transform": [
        {
            "filter": "datum.type !== 'closed'"
        },
        {
            "lookup": "type",
            "from": {
                "data": {
                    "values": [
                        {"type": "heliport", "type_display": "Heliport"},
                        {"type": "small_airport", "type_display": "Small Airport"},
                        {"type": "balloonport", "type_display": "Balloonport"},
                        {"type": "medium_airport", "type_display": "Medium Airport"},
                        {"type": "large_airport", "type_display": "Large Airport"}
                    ]
                },
                "key": "type",
                "fields": ["type_display"]
            }
        },
        {
            "aggregate": [
                {"op": "count", "as": "count"}
            ],
            "groupby": ["type_display"]
        },
        {
            "calculate": "datum.type_display + ' (' + datum.count + ')'",
            "as": "type_count"
        }
    ],
    "layer": [
        {
            "mark": {
                "type": "arc",
                "innerRadius": 20,
                "stroke": "#2e353b"
            },
            "params": [{
                "name": "hover",
                "select": {"type": "point", "on": "mouseover", "clear": "mouseout"}
            }],
            "encoding": {
                "theta": {"field": "count", "type": "quantitative", "stack": true},
                "radius": {
                    "field": "count",
                    "scale": {
                        "type": "sqrt",
                        "zero": true,
                        "rangeMin": 50,
                        "rangeMax": 200
                    }
                },
                "color": {
                    "field": "type_display",
                    "type": "nominal",
                    "legend": {
                        "title": "Airport Category"
                    },
                    "scale": {
                        "domain": ["Small Airport", "Medium Airport", "Heliport","Balloonport", "Large Airport"],
                        "range": ["#f3c95a", "#eb8d6f", "#cf5db4", "#b45fc3", "#9861d1"]
                    }
                },
                "tooltip": [
                    {"field": "type_display", "type": "nominal", "title": "Airport Type"},
                    {"field": "count", "type": "quantitative", "title": "Number"}
                ],
                "order": {"field": "count", "type": "quantitative", "sort": "ascending"},
                "opacity": {
                    "condition": [
                        {
                            "param": "hover",
                            "empty": false,
                            "value": 1
                        },
                        {
                            "test": "datum.type_display === 'Small Airport'",
                            "value": 1
                        }
                    ], "value": 0.5
                }
            }
        },
        {
            "mark": {
                "type": "text",
                "x": -5,
                "y": 200
            },
            "data": {"values": [{"airport": "Small Airport 56.3%"}]},
            "encoding": {
                "text": {"field": "airport", "type": "nominal"},
                "color": {"value": "#d1d4ce"},
                "size": {"value": 12}
            }
        },
        {
            "mark": {
                "type": "text",
                "x": 385,
                "y": 300,
                "align": "left"
            },
            "data": {"values": [{"airport": "Medium Airport 23.0%"}]},
            "encoding": {
                "text": {"field": "airport", "type": "nominal"},
                "color": {"value": "#d1d4ce"},
                "size": {"value": 12}
            }
        },
        {
            "mark": {
                "type": "text",
                "x": 380,
                "y": 125,
                "align": "left"
            },
            "data": {"values": [{"airport": "Heliport 19.0%"}]},
            "encoding": {
                "text": {"field": "airport", "type": "nominal"},
                "color": {"value": "#d1d4ce"},
                "size": {"value": 12}
            }
        },
        {
            "mark": {
                "type": "text",
                "x": 320,
                "y": 75,
                "align": "left"
            },
            "data": {"values": [{"airport": "Balloonport 0.8%"}]},
            "encoding": {
                "text": {"field": "airport", "type": "nominal"},
                "color": {"value": "#d1d4ce"},
                "size": {"value": 12}
            }
        },
        {
            "mark": {
                "type": "text",
                "x": 270,
                "y": 50,
                "align": "left"
            },
            "data": {"values": [{"airport": "Large Airport 0.8%"}]},
            "encoding": {
                "text": {"field": "airport", "type": "nominal"},
                "color": {"value": "#d1d4ce"},
                "size": {"value": 12}
            }
        },
        {
            "mark": {
                "type": "rule",
                "color": "#d1d4ce"
            },
            "encoding": {
                "x": {"value": 55},
                "x2": {"value": 100},
                "y": {"value": 200},
                "y2": {"value": 200}
            }
        },
        {
            "mark": {
                "type": "rule",
                "color": "#d1d4ce"
            },
            "encoding": {
                "x": {"value": 350},
                "y": {"value": 275},
                "x2": {"value": 380},
                "y2": {"value": 300}
            }
        },
        {
            "mark": {
                "type": "rule",
                "color": "#d1d4ce"
            },
            "encoding": {
                "x": {"value": 350},
                "y": {"value": 150},
                "x2": {"value": 375},
                "y2": {"value": 125}
            }
        },
        {
            "mark": {
                "type": "rule",
                "color": "#d1d4ce"
            },
            "encoding": {
                "x": {"value": 275},
                "y": {"value": 75},
                "x2": {"value": 315},
                "y2": {"value": 75}
            }
        },
        {
            "mark": {
                "type": "rule",
                "color": "#d1d4ce"
            },
            "encoding": {
                "x": {"value": 255},
                "y": {"value": 150},
                "x2": {"value": 275},
                "y2": {"value": 75}
            }
        },
        {
            "mark": {
                "type": "rule",
                "color": "#d1d4ce"
            },
            "encoding": {
                "x": {"value": 250},
                "y": {"value": 150},
                "x2": {"value": 262},
                "y2": {"value": 50}
            }
        }
    ]
}